#!/bin/sh
bold="$(tput bold)"
normal="$(tput sgr0)"
envname="$1"
envyml="${2:-environment.yml}"
if [ -z "$envname" ]; then
    echo "❌  ${bold}Environment name required, aborting.${normal}"
    exit 1
fi
if [ ! -f "$envyml" ]; then
    echo "❌  ${bold}Environment file ${envyml} not found, aborting.${normal}"
    exit 1
fi
conda env create -n "$envname" -f "$envyml"
. "$CONDA_PREFIX/etc/profile.d/conda.sh"
conda activate "$envname"
prepare-env "$envyml"
