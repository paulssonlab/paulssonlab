#!/bin/sh
bold="$(tput bold)"
normal="$(tput sgr0)"
if ! hash mamba 2> /dev/null ; then
    echo "üêç  ${bold}Installing mamba${normal}"
    echo "    ${bold}You are highly encouraged to use mamba instead of conda${normal},"
    echo "    as it is much faster and seems to offer more accurate dependency resolution."
    echo "    All you need to do is prefix your command with 'mamba'"
    echo "    where before you had 'conda'."
    check-long-running-process || exit $?
    conda install -y mamba -n base -c conda-forge
    status=$?
    if [ $status != 0 ] ; then
        echo "‚ùå  conda install mamba -n base -c conda-forge ${bold}failed, aborting.${normal}"
        exit $status
    fi
fi

exec mamba "$@"
