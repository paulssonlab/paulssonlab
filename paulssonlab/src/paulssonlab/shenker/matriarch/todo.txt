REPLY TO HOLOVIEWS DEVS

get_trench_bbox: half-way to next trench
dilate 3x, then get from left/right edges of original mask

mother cell endpoint tracking
mother cell segmentation mask
allow image viewer to overlay seg masks, trench thumb boundaries easily
fluorescent readout using cell masks

use first N=20, majority vote to constrain all others
fix too-narrow periods
fix period-finding: trench intensity normalization
fix rotation

NONE_POS:
3: intensity hough, no peaks in dxs.max()
44: same
50: same, end of row (half of frame blank)
76: same
239: single peak, need to normalize trenches before period-finding (for each disjoint segment in segmentation mask, normalize to max in that segment)

fix pickling of diag_pos:
    make sure pickle isn't doing something stupid (compare pickled sizes with asized)
    compress/quantize/change dtype/crop intermediates (esp. masks)
    load raw images from disk
set up viewer for quick refresh of new data (just send new data to Stream)
fix none_pos
use trench_spacing to identify good/bad trench finding, use median (robust metric) from first 10 positions to constrain trench finding for rest of positions
refactor trench detection, only detect rotation once
per-trench and per-frame sharpness
per-trench and per-frame debris/QA detector
dataframe join with per-frame, per-trench metadata

rotation-invariant detrending
test detect_trenches on each position using max-stack, on a few positions using each timepoint (use trench spacing/rotation as benchmark)
look for brightest N pixels in trench cross-sections, show in table/next-prev browser so I can click and have viewer load/crop to trench
synchronize RangeXY of all images

####################

plot browser: only update visible outputs (accordion state)

replace ingested/processed flag with finished flag

minimum spacing from smallest consecutive peak spacing
weight periodogram by peak height (?? this may be bad)

non-binary hough transform (??)
2nd, 3rd cell endpoint tracking, masks
UI
tiff metadata/sketch of folder watcher (“stream”) command

compute loading statistics (over time)

allow multiple accordion panes to be open simultaneously (see ipywidgets bug)
figure out why regrid(aggregator='mode') segfaults
revisit holoviews image axis inversion/overlay bug
fix bokeh toolbar/wheel zoom on by default

sublime remotesubl retry

command-line ingest/quantize commands (incl. option to only process first N)
auto LSF parallelization for ingest/quantize
auto-detect quantization level (need “natural image” vs. independent noise heuristic)

get rid of ingest_nd2_file
implement quantize_nd2 by allowing ingest_nd2 take a filter func
profile quantize

allow image viewer to overlay trenches easily
link image viewer to frame stepping widget
improve rotation detection/trench finding
mother cell endpoint tracking
mother cell volume mask
allow image viewer to overlay mean cell intensity/variance easily on seg masks
beyond mother cell tracking

spatial barcode warp/metric/clustering

unify process_arrays, process_attrs, ingest_nd2 so they can all share the same parallelization/remote execution/completion status tracking/progress bar infrastructure

fast/parallel nd2 to zarr converter, with progress bar (command line tool)

crosstalk composite
use fluorescent channel when doing lineage tracking

process_frames: register computed groups callback to compute on demand (TODO: use threading to store, return computed value immediately), provide require_computed, keep track of which (c, t) have been computed
LATER: need to handle versioning of computed callbacks

universal caching/storage layer (look up diagnostic/intermediate calculations, if not found, recompute and store them)

POLISH:
alignment between kymograph pixel centers and sharpness plot points
pixel value live display
turn on wheel zoom by default
DWG overlay

AFTER BUG FIX/WORKAROUND:
live-updating intersected point on thumbnail

NICE THINGS:
replace thumbnail viewer with full-size image viewer
stich together multiple fields in image viewer, toggle to use unified or per-field coördinate system
